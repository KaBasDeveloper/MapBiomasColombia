/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var Inundables = ee.FeatureCollection("projects/mapbiomas-raisg/DATOS_AUXILIARES/VECTORES/clasificacion-regiones-inundable-4"),
    nicfi = ee.ImageCollection("projects/planet-nicfi/assets/basemaps/americas"),
    from_27_to_11_2 = 
    /* color: #d63000 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.21892020398049, 2.7889789489095165],
                  [-71.22001454525856, 2.7878644710781555],
                  [-71.22078702145485, 2.786857153668468],
                  [-71.22278258496193, 2.784649625266979],
                  [-71.22181698971657, 2.7845853282612243],
                  [-71.22130200558571, 2.785571215297037],
                  [-71.22001454525856, 2.7861070231224985],
                  [-71.21954247647194, 2.788078793820038],
                  [-71.21829793148903, 2.788078793820038],
                  [-71.21821210080056, 2.7898791033100743]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.21565863781838, 2.788507439186656],
                  [-71.21552989178566, 2.7876501482972427],
                  [-71.21469304257302, 2.7874572577610572],
                  [-71.21490761929421, 2.7859355646448773],
                  [-71.2144570081797, 2.7845210312519715],
                  [-71.21329829388527, 2.7861927523519388],
                  [-71.21160313778786, 2.7873715286237126],
                  [-71.21314809018044, 2.787950200179598],
                  [-71.2146715849009, 2.7883359810587436]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.21487506384321, 2.7827745867154148],
                  [-71.2150896405644, 2.7815958058438084],
                  [-71.21436007971235, 2.780824239544335],
                  [-71.21191390509077, 2.780652780298126],
                  [-71.21232160086103, 2.7818315621124117]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.23902327812206, 2.782259575583549],
                  [-71.23481757438671, 2.7831168703971056],
                  [-71.23902327812206, 2.783202599844173]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.25900421902621, 2.802919416321969],
                  [-71.2597766952225, 2.8037338320829437],
                  [-71.25969086453402, 2.805105478398831],
                  [-71.26149330899203, 2.804848294837127],
                  [-71.26312409207308, 2.8078487662030454],
                  [-71.26454029843295, 2.8071629448556648],
                  [-71.26295243069613, 2.805405525815981],
                  [-71.26132164761508, 2.8037766960546584],
                  [-71.2617937164017, 2.8016763595941128],
                  [-71.2622443275162, 2.799318834589118],
                  [-71.26093540951693, 2.799361698722467],
                  [-71.26117144391024, 2.8001332528545637],
                  [-71.25945483014071, 2.8012262870051163],
                  [-71.25797425076449, 2.8007547822025356],
                  [-71.25698719784701, 2.802833688314141],
                  [-71.25784550473178, 2.8037338320829437]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.21122707128187, 2.816086797002447],
                  [-71.21212829351087, 2.8157438888006263],
                  [-71.21191371678968, 2.815443844041224],
                  [-71.21101249456068, 2.8156152981989138]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.23304398264114, 2.8303175711520594],
                  [-71.23302252496902, 2.8295246054933676],
                  [-71.23240025247756, 2.829888941133641],
                  [-71.23261482919875, 2.830489023115052]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "6"
            })]),
    form_27_to_11_1 = 
    /* color: #000000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      },
      {
        "type": "polygon"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.3909711633565, 2.88910227465513],
                  [-70.3909711633565, 2.887302119745726],
                  [-70.38987682207842, 2.887302119745726],
                  [-70.38987682207842, 2.88910227465513]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.3921881722564, 2.8867325985534733],
                  [-70.3921881722564, 2.8858110891173734],
                  [-70.39122257701104, 2.8858110891173734],
                  [-70.39122257701104, 2.8867325985534733]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.39321814051812, 2.885232466531394],
                  [-70.39321814051812, 2.8842466644104374],
                  [-70.3926387833709, 2.8842466644104374],
                  [-70.3926387833709, 2.885232466531394]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.42155633045775, 2.833603898437666],
                  [-71.42155633045775, 2.8320179710763584],
                  [-71.42014012409788, 2.8320179710763584],
                  [-71.42014012409788, 2.833603898437666]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.41155835114965, 2.839315109615453],
                  [-71.41155835114965, 2.8387364635522614],
                  [-71.41104336701879, 2.8387364635522614],
                  [-71.41104336701879, 2.839315109615453]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.36080845801003, 2.90055247808797],
                  [-71.36080845801003, 2.898591614731921],
                  [-71.35806187597878, 2.898591614731921],
                  [-71.35806187597878, 2.90055247808797]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.35628088919289, 2.903702710457794],
                  [-71.35628088919289, 2.902631203834441],
                  [-71.3529334923423, 2.902631203834441],
                  [-71.3529334923423, 2.903702710457794]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.4064005662572, 2.895505478756184],
                  [-71.4064005662572, 2.8936624733837335],
                  [-71.40371835724231, 2.8936624733837335],
                  [-71.40371835724231, 2.895505478756184]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.4110997964513, 2.8976056440136158],
                  [-71.4110997964513, 2.8944553946671996],
                  [-71.40934026733753, 2.8944553946671996],
                  [-71.40934026733753, 2.8976056440136158]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.54897782839181, 2.8961390236365574],
                  [-71.54897782839181, 2.894038855659764],
                  [-71.54644582308175, 2.894038855659764],
                  [-71.54644582308175, 2.8961390236365574]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.54322717226388, 2.90141085669991],
                  [-71.54322717226388, 2.8983249086190157],
                  [-71.53884980715158, 2.8983249086190157],
                  [-71.53884980715158, 2.90141085669991]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.55520055330636, 2.8958818604200087],
                  [-71.55520055330636, 2.894381740493287],
                  [-71.55395600832345, 2.894381740493287],
                  [-71.55395600832345, 2.8958818604200087]]], null, false),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.82949606878361, 2.7909507435200442],
                  [-70.82966773016057, 2.789407622675065],
                  [-70.82777945501408, 2.7866642917293496],
                  [-70.82692114812932, 2.7875215833369835],
                  [-70.82863776189885, 2.790179183350746]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.82279830969395, 2.7918966568048416],
                  [-70.82348495520176, 2.792025250013629],
                  [-70.82365661657872, 2.7915108770940034],
                  [-70.82339912451329, 2.7908036139618835],
                  [-70.822626648317, 2.791489444884133]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.82093149221959, 2.7927968089707926],
                  [-70.8215108493668, 2.792025250013629],
                  [-70.82093149221959, 2.791682334758903],
                  [-70.8205023387772, 2.792303868584397],
                  [-70.82063108480992, 2.7929039698969773]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.83990417900526, 2.7771858743407862],
                  [-70.84093414726698, 2.775814195446426],
                  [-70.84153496208631, 2.774442514959881],
                  [-70.84149204674208, 2.774013864481437],
                  [-70.84117018166029, 2.773928134367103],
                  [-70.84069811287367, 2.7755570054764513],
                  [-70.83941065254652, 2.7769501171441737]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.84974936582819, 2.7828264806643377],
                  [-70.85037163831964, 2.7821835094542373],
                  [-70.85045746900812, 2.7816262674551684],
                  [-70.84822587110773, 2.7808975659821633],
                  [-70.84749631025568, 2.7817762941731337]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.85350445844904, 2.7798259453511793],
                  [-70.85384778120294, 2.7792472698057713],
                  [-70.85273198225275, 2.7789900805833927],
                  [-70.85187367536798, 2.7786471615330686],
                  [-70.8518951330401, 2.7793758643959374]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.03640686733347, 2.8743003859571985],
                  [-71.03649269802195, 2.8731859901939703],
                  [-71.03486191494089, 2.8682997805502075],
                  [-71.02945458156687, 2.86752827185493],
                  [-71.02215897304636, 2.8700999654814403],
                  [-71.02267395717722, 2.8742146632447785],
                  [-71.02893959743601, 2.8751576127267953],
                  [-71.0296047852717, 2.8751790433877855],
                  [-71.03078495723825, 2.8756076565230058],
                  [-71.03177201015573, 2.8759291162687473],
                  [-71.03563439113718, 2.875500503254312]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.13311216323464, 2.8332721046507205],
                  [-71.12950727431863, 2.828985808261483],
                  [-71.12384244887917, 2.828471451629477],
                  [-71.11916468652213, 2.831300414287822],
                  [-71.11551687209695, 2.834129362025014],
                  [-71.11487314246779, 2.8361867753411896],
                  [-71.11448690383523, 2.8382441885794933],
                  [-71.11159011321129, 2.8438163222375934],
                  [-71.11598893568156, 2.8452736523656945],
                  [-71.12058088271706, 2.8421875502799767],
                  [-71.13285467116921, 2.8358438748685115]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.10453054397195, 2.836701130337322],
                  [-71.10796377151101, 2.8348151674672804],
                  [-71.10796377151101, 2.8332721046507205],
                  [-71.10461637466042, 2.8353295212822305]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.2122741157246, 2.786159431215197],
                  [-71.2135186607075, 2.7838876044619805],
                  [-71.21270326916698, 2.7829017160172964],
                  [-71.21158747021678, 2.781358584622444],
                  [-71.21347574536327, 2.779858316052791],
                  [-71.21343283001903, 2.7784437753686033],
                  [-71.21034292523387, 2.7781008561595697],
                  [-71.20875505749706, 2.7806727477987763],
                  [-71.20643762890819, 2.7829017160172964],
                  [-71.20630888287548, 2.785473597185443],
                  [-71.20789675061229, 2.786673806475329],
                  [-71.20789675061229, 2.7846163040865743],
                  [-71.20892671887401, 2.784059063237721],
                  [-71.21017126385692, 2.787188181510686],
                  [-71.21141580883983, 2.786973858606608]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.42528677539542, 2.8307499930701217],
                  [-71.42846251086905, 2.825949329604051],
                  [-71.43043661670401, 2.8204628327607875],
                  [-71.42889166431144, 2.8197770188344293],
                  [-71.42691755847648, 2.825606424310593],
                  [-71.42322683887198, 2.829892733194602]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.43627310352042, 2.8091468513332045],
                  [-71.44258165912345, 2.807946665044784],
                  [-71.44846106128409, 2.8085896221384],
                  [-71.44841814593985, 2.807946665044784],
                  [-71.44339705066398, 2.807432299115101],
                  [-71.4367022569628, 2.8074751629512344]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.57987837703178, 2.935347882167342],
                  [-71.5768743029351, 2.9327977665357507],
                  [-71.57717471034476, 2.9317262876444437],
                  [-71.57663826854179, 2.9312119774120995],
                  [-71.57595162303397, 2.9309762518099336],
                  [-71.57324795634696, 2.9314262733709757],
                  [-71.57977108867118, 2.935776472458661]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.26332451104822, 2.8612315804193553],
                  [-72.26336742639246, 2.8588741765584818],
                  [-72.26302410363856, 2.8575454558840168],
                  [-72.26212288140955, 2.8586170049351036],
                  [-72.26242328881922, 2.8617459224358344]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.26757313012781, 2.8603314813352845],
                  [-72.26765896081629, 2.8571596979807277],
                  [-72.26692939996424, 2.8567310779361597],
                  [-72.26619983911219, 2.859988586260262],
                  [-72.26718689202967, 2.8614030277838385]]]),
            {
              "from": "27,",
              "to": "11,",
              "system:index": "26"
            })]),
    MaskZone = 
    /* color: #000000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-73.08888352671134, 3.7882325515559785],
          [-73.08888352671134, 2.1809716497223253],
          [-69.83143723764884, 2.1809716497223253],
          [-69.83143723764884, 3.7882325515559785]]], null, false),
    from_11_to_0 = 
    /* color: #98ff00 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.3371421255255, 3.016730720124015],
                  [-70.34169115201476, 3.0166450083754888],
                  [-70.35010255948546, 2.99658827384236],
                  [-70.34967340604308, 2.9841597708404666],
                  [-70.34443773404601, 2.9837311992613564],
                  [-70.33525385037902, 3.0031881801720126]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.33919302580671, 2.9854812915778832],
                  [-70.33919302580671, 2.9834670061250734],
                  [-70.33591000197248, 2.982952719885995],
                  [-70.33382860777692, 2.9824812906221854],
                  [-70.3315540945323, 2.9823527189697088],
                  [-70.33172575590925, 2.9806812861199012],
                  [-70.32975165007429, 2.9803384277855645],
                  [-70.32880751250104, 2.983038434275883],
                  [-70.33385006544904, 2.9847098635428213],
                  [-70.33372131941633, 2.9863170046712515]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.33318487761335, 2.9867241467171457],
                  [-70.33432213423566, 2.9854812915778832],
                  [-70.33067432997541, 2.984367006464512],
                  [-70.32681194899396, 2.98252414783634],
                  [-70.32507387755231, 2.980767000686794],
                  [-70.32543865797834, 2.978795563959378],
                  [-70.32385079024152, 2.9784098476649965],
                  [-70.3212544119151, 2.9829955770817653]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.3403088247569, 2.982652719468779],
                  [-70.34125296233015, 2.980767000686794],
                  [-70.33807722685651, 2.9745955348159763],
                  [-70.3348156606944, 2.9742098170514026],
                  [-70.33312050459699, 2.9751955399593464],
                  [-70.33550230620222, 2.977831272970079],
                  [-70.33833471892194, 2.980767000686794],
                  [-70.33865658400373, 2.982802719687622]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.33039538023786, 2.993656445364976],
                  [-70.33297030089216, 2.987099338622624],
                  [-70.32262770293073, 2.9834136274399197],
                  [-70.31683413145856, 2.9820850540992048],
                  [-70.30425993559675, 2.9851279132489488],
                  [-70.30395952818708, 2.9897564715688016],
                  [-70.30649153349714, 2.990056470045586],
                  [-70.31207052824811, 2.9879564789855317],
                  [-70.31837908385114, 2.9865421970279034],
                  [-70.32541720030622, 2.989285045225238],
                  [-70.32498804686384, 2.9928850230775836]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.31601873991804, 3.0077562346709406],
                  [-70.31958071348981, 3.0059991279973115],
                  [-70.31704870817975, 2.9960992790243233],
                  [-70.31563250181989, 2.9926707390124805],
                  [-70.31241385100202, 2.99177074548158],
                  [-70.30868021605329, 2.9939564427745067],
                  [-70.31052557585554, 3.0042848748569932]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.37134270657916, 2.943366588107954],
                  [-70.36593537320513, 2.9357377081896803],
                  [-70.34430603970904, 2.945509522515222],
                  [-70.34241776456255, 2.955195534545001],
                  [-70.35314660062213, 2.9546812351438834]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.32344918240923, 2.9723387112899764],
                  [-70.32259087552447, 2.9687386662143296],
                  [-70.31812767972369, 2.9677100797517184],
                  [-70.31692605008502, 2.964538598800459],
                  [-70.31289200772662, 2.960252799289216],
                  [-70.3074846743526, 2.964195735450197],
                  [-70.30911545743365, 2.9699386825436918]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.32010178555865, 2.96831008863794],
                  [-70.32799820889849, 2.9648814620444774],
                  [-70.3338346957149, 2.9603385154419968],
                  [-70.33623795499224, 2.9565669984494742],
                  [-70.34473519315142, 2.95202401777637],
                  [-70.3419027804317, 2.9479953212609384],
                  [-70.3239641665401, 2.9548526683040603],
                  [-70.3158960818233, 2.9586241911268703]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.32525162686724, 2.972424426505829],
                  [-70.34155945767779, 2.9664243453273005],
                  [-70.34602265347857, 2.9562241326322725],
                  [-70.34413437833209, 2.9540812188747294],
                  [-70.34052948941607, 2.9569098641607003],
                  [-70.33452134122271, 2.96239570111861],
                  [-70.32799820889849, 2.969252959086545],
                  [-70.32199006070513, 2.9703672594881816]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.33359147786659, 2.8354724897468078],
                  [-70.33702470540565, 2.830500393909669],
                  [-70.32947160481972, 2.823642295688359],
                  [-70.3203735518412, 2.828271516434765]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.36637880086464, 2.796380955882151],
                  [-70.37891008138222, 2.7927803540687917],
                  [-70.37891008138222, 2.7874651597938724],
                  [-70.36483384847206, 2.7884939089479497],
                  [-70.36380388021034, 2.794323470484059]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.66853283629254, 2.8392133699583995],
                  [-70.68741558775739, 2.833212581370517],
                  [-70.68458317503766, 2.8203536440306944],
                  [-70.66604374632672, 2.829869271375478]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.65684574919902, 2.747594163811845],
                  [-70.65736073332988, 2.7440791459207103],
                  [-70.6543566592332, 2.743050358240651],
                  [-70.65384167510234, 2.74510793271538],
                  [-70.65538662749492, 2.7478513598367442]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.7257677920457, 2.746136718624329],
                  [-70.73538082915508, 2.743050358240651],
                  [-70.73761242705547, 2.7289901713839186],
                  [-70.73314923125469, 2.7279613707561516],
                  [-70.72456616240703, 2.739963989891439],
                  [-70.72370785552226, 2.744765003882218]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.72490948516094, 2.7284757711800696],
                  [-70.72216290312969, 2.7140724762661854],
                  [-70.717356384575, 2.7127007249271737],
                  [-70.70911663848125, 2.731905101713016],
                  [-70.70740002471172, 2.735677353986513],
                  [-70.71254986602031, 2.7365346823942205]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.72535916288447, 2.742717641195957],
                  [-70.72162552793574, 2.7396312719885807],
                  [-70.71879311521602, 2.739374074195408],
                  [-70.71814938505244, 2.741431654993627],
                  [-70.72050972898555, 2.7448180823524995],
                  [-70.725273332196, 2.7449038145662037]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.75941426667318, 2.707920602143761],
                  [-70.75692517670736, 2.7058200965978685],
                  [-70.75284821900472, 2.7055628915869865],
                  [-70.75027329835042, 2.708949419857977],
                  [-70.75349194916829, 2.7106212467791706]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.75992925080403, 2.705477156571239],
                  [-70.7611308804427, 2.703462381956295],
                  [-70.75426442536458, 2.702090618601911],
                  [-70.75353486451253, 2.7039767928144163],
                  [-70.75559480103597, 2.7051770839683713]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.78313048553558, 2.812534241939996],
                  [-70.7852762527475, 2.8090194173812315],
                  [-70.78184302520843, 2.804132936395151],
                  [-70.77840979766937, 2.808333596721181]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.78278716278167, 2.8072191372897746],
                  [-70.77823813629242, 2.8025898328938896],
                  [-70.77377494049163, 2.8055903100550204],
                  [-70.78064139556976, 2.808162141493247]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.77180083465667, 2.802847016952066],
                  [-70.77248748016449, 2.7983891519474584],
                  [-70.77214415741058, 2.7924738818300816],
                  [-70.77042754364105, 2.7912736784589787],
                  [-70.76862509918304, 2.8012181836292336]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.7801264114389, 2.7882731646695875],
                  [-70.77737982940765, 2.785358372517501],
                  [-70.77180083465667, 2.791187949599844],
                  [-70.77386077118011, 2.7926453393544266]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.8381875758356, 2.7598643410814914],
                  [-70.83947503616275, 2.75026241528318],
                  [-70.83647096206607, 2.748719241420047],
                  [-70.83312356521549, 2.75840691090244]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.83981835891666, 2.7618361555378277],
                  [-70.842221618194, 2.75600643377307],
                  [-70.84093415786685, 2.7554920451867693],
                  [-70.83913171340885, 2.7569494789372277],
                  [-70.83878839065494, 2.76260773421672]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-70.84410989334049, 2.7676658486882926],
                  [-70.84531152297916, 2.751205464994487],
                  [-70.84170663406314, 2.746061548423137],
                  [-70.83921754409732, 2.7479476537400958],
                  [-70.84024751235904, 2.7549776563781863],
                  [-70.84084832717838, 2.766379889426813]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.09585415580328, 2.8744884168414715],
                  [-71.09473835685309, 2.8705451660595],
                  [-71.09001766898687, 2.8671162412741253],
                  [-71.08632694938238, 2.8656589451275165],
                  [-71.08744274833258, 2.8721739017287566],
                  [-71.09276425101812, 2.875774256542453]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.096884124065, 2.8717452873041136],
                  [-71.09782826163824, 2.8703737200645127],
                  [-71.09679829337652, 2.8691735973794126],
                  [-71.09568249442633, 2.8711452268394093]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.15893034283641, 2.8063913549388544],
                  [-71.15618376080516, 2.8022764156902618],
                  [-71.15412382428173, 2.8033908798326674],
                  [-71.1527505332661, 2.802447871781245],
                  [-71.15172056500438, 2.8002189406399896],
                  [-71.15051893536571, 2.8007333097414615],
                  [-71.15172056500438, 2.8055340771226907],
                  [-71.1556687766743, 2.8068199936111555]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.24588523013115, 2.889883788386092],
                  [-71.25215087038994, 2.888683686256243],
                  [-71.25163588625908, 2.884226152958795],
                  [-71.24700102908135, 2.876939762843351],
                  [-71.24159369570732, 2.8795971575804375]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.35404730395987, 2.83632216679344],
                  [-71.35078573779776, 2.8336646719017806],
                  [-71.3447775896044, 2.836579343394437],
                  [-71.34949827747062, 2.843265914929617],
                  [-71.35181570605948, 2.8425801145029705],
                  [-71.35610724048331, 2.8418943136687296]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.3455500658007, 2.8347791059865584],
                  [-71.34812498645499, 2.833407494652918],
                  [-71.34984160022452, 2.829121198764566],
                  [-71.34803915576651, 2.825006339803313],
                  [-71.34323263721183, 2.828521116075113]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.39061117725089, 2.8315215264158304],
                  [-71.39859343127921, 2.830321363211621],
                  [-71.40751982288077, 2.8284353899512675],
                  [-71.41086721973136, 2.821320099599992],
                  [-71.41533041553214, 2.817719574629813],
                  [-71.41421461658194, 2.812918857349088],
                  [-71.37344503955558, 2.828864020507111],
                  [-71.38889456348136, 2.8328074141833772]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.48765781905702, 2.8474884326046634],
                  [-71.48546913681643, 2.847209826025961],
                  [-71.48722866561464, 2.8508745538230875],
                  [-71.49006107833436, 2.8534462847994493],
                  [-71.49364450553696, 2.855117913255075],
                  [-71.49808624770692, 2.8557608377590857],
                  [-71.49349430587343, 2.8503173446870234],
                  [-71.48877361800722, 2.847788469064077]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.47971848037294, 2.846331148386384],
                  [-71.48053387191347, 2.8442737513512633],
                  [-71.47851685073427, 2.8399874957423723],
                  [-71.47697189834169, 2.8392588307062727],
                  [-71.47886017348817, 2.84388798899848],
                  [-71.47963264968446, 2.8446166511120956],
                  [-71.47903183486513, 2.8460739739578202]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.50642490016618, 2.8649180099539344],
                  [-71.50882815944352, 2.860203212547133],
                  [-71.50556659328142, 2.856174188493091],
                  [-71.49775600063005, 2.8594316983978656],
                  [-71.49844264613786, 2.8638893285382037]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.53989886867204, 2.868175495004671],
                  [-71.53663730250993, 2.848887619745229],
                  [-71.52848338710466, 2.846573052957431],
                  [-71.52436351405778, 2.8613176209574553],
                  [-71.53011417018571, 2.871604416612747],
                  [-71.53560733424821, 2.872290199699544]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.71779038813692, 2.818630210095222],
                  [-71.72053697016817, 2.815544039384291],
                  [-71.72105195429903, 2.8101432209735235],
                  [-71.71401383784395, 2.8094574009735402],
                  [-71.70680406001192, 2.8170013987948814]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.40035099956393, 3.5300361955095227],
                  [-71.4370865342319, 3.541001614012898],
                  [-71.44120640727877, 3.522840069235198],
                  [-71.4261002061069, 3.499880628294743],
                  [-71.41992039653658, 3.484459792146644],
                  [-71.40138096782565, 3.4738364023821156],
                  [-71.39417118999361, 3.483774415777221],
                  [-71.39417118999361, 3.5108464018534375]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.54799164805122, 3.564523241489025],
                  [-71.86590851816841, 3.5590406880814958],
                  [-71.89337433848091, 3.5220326016132195],
                  [-71.80651368174263, 3.407915140116656],
                  [-71.78934754404732, 3.4092860016627613],
                  [-71.77973450693794, 3.419224689387328],
                  [-71.77424134287544, 3.4240226397173963],
                  [-71.75844849619575, 3.417168417609554],
                  [-71.75123871836372, 3.425393478254962],
                  [-71.74368561777779, 3.4267643148293745],
                  [-71.73441590342232, 3.4291632741084097],
                  [-71.73475922617622, 3.440129868387726],
                  [-71.73166932139107, 3.4404725724278586],
                  [-71.7227429297895, 3.445955820301819],
                  [-71.72101445171236, 3.4532746634824933],
                  [-71.70899815532565, 3.447106054861333],
                  [-71.7007584092319, 3.449162262183538],
                  [-71.69663853618502, 3.4618421089569815],
                  [-71.6787857529819, 3.4673252334018074],
                  [-71.6677994248569, 3.4707521700380353],
                  [-71.66093296977877, 3.480347526445345],
                  [-71.65337986919283, 3.4848024801441606],
                  [-71.63896031352877, 3.4834317274053275],
                  [-71.62660069438815, 3.4731510182874303],
                  [-71.60291142436861, 3.474179094242848],
                  [-71.60016484233736, 3.4782913868619576],
                  [-71.60050816509127, 3.487886666503654],
                  [-71.59329838725924, 3.482060972670251],
                  [-71.58368535014986, 3.4796621470827147],
                  [-71.5744156357944, 3.4762352427935808],
                  [-71.56789250347018, 3.4769206246478706],
                  [-71.56068272563815, 3.466982539054924],
                  [-71.53974003764986, 3.4591005348277797],
                  [-71.52703709575533, 3.4539600619678774],
                  [-71.51227421733736, 3.4556735560161],
                  [-71.49545140239596, 3.462870197209836],
                  [-71.4810318467319, 3.4656117604257273],
                  [-71.46283574077486, 3.4673252334018074],
                  [-71.4480728623569, 3.4779486964952837],
                  [-71.42438359233736, 3.4834317274053275],
                  [-71.42781681987643, 3.5077622910371815],
                  [-71.44223637554049, 3.520441348106797]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.4552520472267, 3.277107037979307],
                  [-72.87135922496107, 3.1729022253785506],
                  [-72.86311947886732, 3.0536022595611687],
                  [-72.69008481089857, 2.9864044576264233],
                  [-72.34950863902357, 3.1783869541510334],
                  [-72.36049496714857, 3.257912219707019]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.10780942027357, 3.3442859882997285],
                  [-72.19020688121107, 3.3305763692312],
                  [-72.22728573863294, 3.2716228416643345],
                  [-72.15175473277357, 3.240088132074016],
                  [-72.07485043589857, 3.311382581987734]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.25955807750013, 3.190041905925941],
                  [-72.3680480677345, 3.1269664841445013],
                  [-72.36049496714857, 3.094741701973422],
                  [-72.22385251109388, 3.17084544458254]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.28633725230482, 3.0796574240651156],
                  [-72.45799862925794, 3.0638872687253973],
                  [-72.47379147593763, 3.030974893180336],
                  [-72.32204281871107, 2.962404241376336],
                  [-72.29801022593763, 2.9644614232147197],
                  [-72.23964535777357, 3.0508595738031965]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.78389853658653, 3.074048822608626],
                  [-72.82509726705528, 2.9780525035389798],
                  [-72.53395957174278, 2.7256801108625592],
                  [-72.48177451314903, 2.9670809577683825],
                  [-72.74269980611778, 3.085019285618248]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.0630373251579, 2.990269685451046],
                  [-72.15504782320477, 2.975183949187709],
                  [-72.14406149507977, 2.92375375761632],
                  [-72.0795168173454, 2.9292397577854747],
                  [-72.02664511324383, 2.951183489179936],
                  [-72.03213827730633, 2.9868411272093325]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.56367783458182, 2.946726898569902],
                  [-71.56281952769706, 2.9440696621959153],
                  [-71.5619612208123, 2.9432124878197743],
                  [-71.5623045435662, 2.940898113711429],
                  [-71.56033043773124, 2.938755170439904],
                  [-71.5553522577996, 2.9385837348003956],
                  [-71.55603890330741, 2.94586972623887],
                  [-71.56127457530448, 2.9480126558286925]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.56899933726737, 2.9499841474060076],
                  [-71.57045845897147, 2.9443268143801626],
                  [-71.56638150411796, 2.944626829389623],
                  [-71.56402115733573, 2.94629831248689],
                  [-71.56573777110526, 2.9508413165667773]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.71880776659512, 2.9189781561259243],
                  [-71.72155434862637, 2.9242927418224043],
                  [-71.73142487780117, 2.930807360898767],
                  [-71.74052293077969, 2.925492806076809],
                  [-71.73751885668301, 2.912549188225226],
                  [-71.72936494127774, 2.9124634684050874]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.72996575609707, 2.9141778635677564],
                  [-71.73082406298184, 2.9107062106548565],
                  [-71.73640305773282, 2.906891666110214],
                  [-71.73790509478115, 2.9107062106548565],
                  [-71.73567349688076, 2.913534965687698],
                  [-71.73811967150235, 2.915335078826433],
                  [-71.74043710009121, 2.9118634294815173],
                  [-71.7368322111752, 2.9044057762071676],
                  [-71.73048074022793, 2.904191475097192],
                  [-71.72537381426358, 2.913706405158286]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.75803790298015, 2.9412103388504907],
                  [-71.78945193496257, 2.940524597643406],
                  [-71.80009494033366, 2.9115516476941448],
                  [-71.78704867568523, 2.9115516476941448],
                  [-71.77932391372234, 2.915151877435862],
                  [-71.76971087661296, 2.913266044245076],
                  [-71.76541934218913, 2.906751323476482],
                  [-71.75838122573406, 2.9024653024533706],
                  [-71.75048480239421, 2.9127517255538433],
                  [-71.75220141616374, 2.9305813028150043]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.81753786454352, 2.9926152365206016],
                  [-71.82320268998298, 2.9790723980493827],
                  [-71.80397661576423, 2.9550720224112306],
                  [-71.79728182206306, 2.953186256565827],
                  [-71.79058702836188, 2.96192932573474],
                  [-71.79608019242438, 2.9850724103755555]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.8011464123878, 2.9556265747240063],
                  [-71.80693998385996, 2.9529693596187574],
                  [-71.80629625369639, 2.945769131915574],
                  [-71.80286302615733, 2.945940566450081],
                  [-71.79844274570078, 2.948897808013706],
                  [-71.79848566104502, 2.9502692796937446],
                  [-71.79736986209483, 2.9517693249065147],
                  [-71.79642572452158, 2.954940842402526]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.80286302615733, 2.9484263642330815],
                  [-71.79870023776621, 2.942340435684643],
                  [-71.79239168216318, 2.942897599540117],
                  [-71.78878679324717, 2.948683515410912],
                  [-71.79020299960703, 2.9535693764887054],
                  [-71.79719820071787, 2.9555837164663243],
                  [-71.79827108432383, 2.952840784533025],
                  [-71.79608240176768, 2.9523264840412566],
                  [-71.79329290439219, 2.9516407496818937],
                  [-71.79187669803233, 2.949754978011953],
                  [-71.79282083560557, 2.9486406568854147],
                  [-71.79320707370371, 2.946497728504865],
                  [-71.79548158694834, 2.9460262837074174],
                  [-71.79754152347178, 2.9472691831972497],
                  [-71.79809942294688, 2.949154959082558],
                  [-71.79878606845469, 2.9512978823435088]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.79584636737437, 2.9503978550770245],
                  [-71.79612531711192, 2.948940666529305],
                  [-71.79578199435801, 2.9484906520331142],
                  [-71.79528846789927, 2.948704944673057],
                  [-71.7949880604896, 2.9492835345946884],
                  [-71.79382934619517, 2.948854949496452],
                  [-71.793078327671, 2.9488120909775453],
                  [-71.79303541232676, 2.949476397834997],
                  [-71.79382934619517, 2.9501621335296586],
                  [-71.79571762134165, 2.9506121473494216]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.79376497317881, 2.948683515410912],
                  [-71.79485931445689, 2.948340647160586],
                  [-71.79528846789927, 2.947997778804589],
                  [-71.79595365573496, 2.9484263642330815],
                  [-71.79679050494761, 2.9490906713209206],
                  [-71.79743423511118, 2.948597798358251],
                  [-71.79747715045542, 2.947654910342908],
                  [-71.79528846789927, 2.9470334609868782],
                  [-71.79511680652232, 2.947590622494595],
                  [-71.79460182239146, 2.9472906124866327],
                  [-71.79361476947398, 2.9475691932109878],
                  [-71.79357185412974, 2.9486192276220367]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.96105744655333, 2.9622214768710187],
                  [-72.1131494265338, 2.9063332408561044],
                  [-72.08190705592833, 2.8370691384018265],
                  [-72.00397279079161, 2.831925597698111],
                  [-71.98543336208067, 2.82472460234915],
                  [-71.94560792262754, 2.8339830167228484],
                  [-71.86355378444395, 2.845641655371069],
                  [-71.84382105045337, 2.883702858122514],
                  [-71.87678003482837, 2.9498783036303506]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.30998354075301, 2.972055514019711],
                  [-72.32371645090926, 2.9490835909110507],
                  [-72.26157503245223, 2.8966235456958485],
                  [-72.20115022776473, 2.8674780231103703],
                  [-72.16716127512801, 2.9250825674521517],
                  [-72.23754243967879, 2.9555980652270244]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.8485364992923, 2.861857922267237],
                  [-71.8488798220462, 2.8583432475666033],
                  [-71.83763600185577, 2.86271515836465],
                  [-71.8378934939212, 2.86528686280801]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.84038564957049, 2.860525717187692],
                  [-71.84227392471698, 2.8593684460946203],
                  [-71.83527872360614, 2.855896625812294],
                  [-71.83339044845965, 2.858939826874948]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.83823988235858, 2.8594541699193314],
                  [-71.83369085586932, 2.8602685459345945],
                  [-71.83360502518084, 2.8621544671176906],
                  [-71.83798239029315, 2.861768710764464],
                  [-71.84223100937274, 2.860611440925905],
                  [-71.8416301945534, 2.8597542032553895]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "60"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.04005985396273, 2.8155216974191832],
                  [-72.01860218184359, 2.806734638675178],
                  [-72.01864509718783, 2.813678563753907],
                  [-72.03327922957308, 2.816378967897998]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "61"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.03074722426302, 2.801462371702745],
                  [-72.02473907606966, 2.7988905255376597],
                  [-72.02169208662875, 2.8016338279129482],
                  [-72.02649860518343, 2.8057487694218852],
                  [-72.02860145705111, 2.804805763271264]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "62"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.03370838301547, 2.8107638348012736],
                  [-72.03499584334261, 2.80772050709682],
                  [-72.03246383803256, 2.8072918687548394],
                  [-72.03186302321322, 2.809649377689217]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "63"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.02924518721468, 2.8086635108955735],
                  [-72.03061847823031, 2.8080205538426313],
                  [-72.0299318327225, 2.8067775025368955],
                  [-72.02834396498568, 2.807634779440991]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "64"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.03731327193148, 2.8063059999715683],
                  [-72.03559665816195, 2.806606047080611],
                  [-72.03593998091586, 2.8081920090913526],
                  [-72.03782825606234, 2.807806234746339]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "65"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.03671245711215, 2.8049772189915725],
                  [-72.04104690688021, 2.8023196525026757],
                  [-72.04297809737093, 2.804419987808629],
                  [-72.04714088576205, 2.801462371702745],
                  [-72.04139022963412, 2.798376155627207],
                  [-72.03246383803256, 2.803862756360223],
                  [-72.03525333540804, 2.8057487694218852]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "66"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.03602581160433, 2.799919264681246],
                  [-72.03392295973666, 2.797647464534375],
                  [-72.02632694380648, 2.7978189213028544],
                  [-72.0227649702347, 2.798804797234918],
                  [-72.03147678511507, 2.8065631832125963],
                  [-72.03581123488314, 2.8061774083298396],
                  [-72.03636913435824, 2.8039056203272295]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "67"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.02079086439974, 2.8091350125094197],
                  [-72.02212124007113, 2.8065631832125963],
                  [-72.02482490675814, 2.8061345444461256],
                  [-72.02435283797152, 2.7988476613870708],
                  [-72.02340870039828, 2.7974760077408196],
                  [-72.01795845168002, 2.8009051388461677],
                  [-72.01740055220492, 2.8051058107653195]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "68"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.04276352064974, 2.8170647838267446],
                  [-72.05194740431673, 2.8147072898800305],
                  [-72.05040245192416, 2.8026625646468704],
                  [-72.0429351820267, 2.8035627085472976],
                  [-72.0441797270096, 2.8069489579680287],
                  [-72.04812793867953, 2.8079348262088364],
                  [-72.04460888045199, 2.81136392665159],
                  [-72.0447376264847, 2.813549972924301],
                  [-72.04087524550326, 2.8131213367232153],
                  [-72.03821449416048, 2.815007334829108]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "69"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.13424246328049, 2.8576868851670416],
                  [-72.13312666433029, 2.8552008878229502],
                  [-72.1285347224968, 2.855372336088407],
                  [-72.12801973836594, 2.857472575263176],
                  [-72.13261168019943, 2.85935850104365]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "70"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.12694685475998, 2.8543436461118703],
                  [-72.13072340505295, 2.8520719524853124],
                  [-72.12904970662765, 2.8493716315830677],
                  [-72.12660353200607, 2.8493716315830677],
                  [-72.12308447377853, 2.852286263396549]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "71"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.13415663259201, 2.856143852966298],
                  [-72.13475744741135, 2.8507432239444324],
                  [-72.12941448838282, 2.8495645152640505],
                  [-72.12904970662765, 2.8518147793391355],
                  [-72.13188211934738, 2.8531435066420676],
                  [-72.13166754262619, 2.85717254133056]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "72"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.12969343679123, 2.8550723016070565],
                  [-72.13119547383957, 2.8536578522825593],
                  [-72.1303371669548, 2.853186368787558],
                  [-72.1279768230217, 2.8538293007782514],
                  [-72.12840597646408, 2.854857991215256]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "73"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.2400322696789, 2.849254498127561],
                  [-72.2440663120373, 2.841710710182767],
                  [-72.22715766640742, 2.834852678355091],
                  [-72.22054870339473, 2.8474542804902265],
                  [-72.22827346535762, 2.851140437394884]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "74"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.24234969826777, 2.8564553405081647],
                  [-72.25007446023066, 2.8483115273351665],
                  [-72.24578292580684, 2.845139710822895],
                  [-72.2411480686291, 2.850540366145072]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "75"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.34129482582875, 2.7071215177770505],
                  [-72.36944729164907, 2.686716439617543],
                  [-72.35571438149282, 2.666482495963237],
                  [-72.31949383095571, 2.680200460347328],
                  [-72.29940944985219, 2.7081503361699455],
                  [-72.33099514321157, 2.718438471983542]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "76"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.38801170119608, 2.687580145067907],
                  [-72.38801170119608, 2.683464796689146],
                  [-72.38140273818338, 2.6816643274156755],
                  [-72.37882781752909, 2.684493635083494],
                  [-72.38578010329569, 2.6885232437845645]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "77"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.48363011176707, 2.7341209623358003],
                  [-72.48466008002879, 2.7328135336378145],
                  [-72.48356573875071, 2.732063368987762],
                  [-72.48296492393138, 2.732792100368591],
                  [-72.4829863816035, 2.7337137305990025]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "78"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.4860119133723, 2.7344853274568135],
                  [-72.48729937369944, 2.732642067473416],
                  [-72.48704188163401, 2.7312489039799046],
                  [-72.48485319907786, 2.730455871731021],
                  [-72.48420946891429, 2.731141737490382],
                  [-72.48519652183177, 2.7323420016267845],
                  [-72.48504631812693, 2.734571060410391],
                  [-72.48596899802806, 2.7346567933578236]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "79"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.48865120704295, 2.733778030356102],
                  [-72.49086134727122, 2.732427734733473],
                  [-72.49107592399241, 2.728891239002145],
                  [-72.49000304038645, 2.727798138215969],
                  [-72.48905890281321, 2.7292984723742446],
                  [-72.48957388694407, 2.7306702048228852],
                  [-72.48940222556712, 2.7315061035157413],
                  [-72.48800747687937, 2.73077737135448],
                  [-72.48742811973216, 2.731334637164645],
                  [-72.48734228904368, 2.7336922973458604]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "80"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.47978200898959, 2.7393672524436132],
                  [-72.49128332124545, 2.733880353006285],
                  [-72.48772134767367, 2.728907828716905],
                  [-72.47943868623568, 2.730493894734787],
                  [-72.47690668092562, 2.7356807446523894]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "81"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.50512919562252, 2.7112228826585727],
                  [-72.5103648711208, 2.712423168757252],
                  [-72.51062235968502, 2.708136432688746],
                  [-72.51087985175045, 2.7021349796867176],
                  [-72.50375590460689, 2.7017063033362176],
                  [-72.50032267706783, 2.708479371962817]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "82"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.54077175958916, 2.7011937268243584],
                  [-72.54587868555352, 2.69454922125172],
                  [-72.54643658502862, 2.6904338963826517],
                  [-72.54257420404717, 2.6882047562776186],
                  [-72.53635147913262, 2.6943348817580093],
                  [-72.53716687067315, 2.700679314786861]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "83"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.50303794844336, 2.638466709735502],
                  [-72.51050521834082, 2.63379388739459],
                  [-72.50964691145606, 2.6315646448699836],
                  [-72.51183559401221, 2.6301928013347067],
                  [-72.5120501707334, 2.628606605366141],
                  [-72.51312305433936, 2.628135033202873],
                  [-72.51247932417579, 2.626848926397637],
                  [-72.50904609663672, 2.629335398358882],
                  [-72.50020553572364, 2.636494695107814]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "84"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.49986221296973, 2.6389382779874895],
                  [-72.50033428175635, 2.640095762938475],
                  [-72.50415374739356, 2.640910288739124],
                  [-72.50870277388282, 2.6385524494309767],
                  [-72.51617004378028, 2.6337510173836516],
                  [-72.51591255171485, 2.6309644635090117],
                  [-72.51411010725684, 2.6311359439273447],
                  [-72.5126080702085, 2.6334937972870556],
                  [-72.50951816542334, 2.636537565024265],
                  [-72.50810195906348, 2.636451825189888],
                  [-72.50741531355567, 2.636880524302702],
                  [-72.50484039290137, 2.639238366782002],
                  [-72.50351001722998, 2.637780791958753]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "85"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.67356526926092, 2.668007663308795],
                  [-72.66541135385565, 2.6607199414882867],
                  [-72.66403806284002, 2.6618345370306025],
                  [-72.66781461313299, 2.670751265043883]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "86"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.67820012643865, 2.6617487989477313],
                  [-72.67614018991522, 2.6672360242174933],
                  [-72.68249166086248, 2.6710084773924443],
                  [-72.6996577985578, 2.6664643846420595],
                  [-72.69811284616522, 2.654289562927773],
                  [-72.69442212656072, 2.6494024528413096],
                  [-72.68875730112127, 2.651288708144843],
                  [-72.68995893075994, 2.654718255873594],
                  [-72.69244802072576, 2.657204672025773],
                  [-72.69219052866033, 2.6617487989477313],
                  [-72.68506658151678, 2.6634635594713276],
                  [-72.68292081430486, 2.6604627269892505],
                  [-72.68154752328924, 2.6621774893023664]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "87"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.71253240182928, 2.656004333818616],
                  [-72.71090161874822, 2.6500026252951376],
                  [-72.70506513193182, 2.6505170585953937],
                  [-72.70137441232733, 2.649659669642864],
                  [-72.6974262006574, 2.643657930360661],
                  [-72.69467961862615, 2.6412572265160987],
                  [-72.6919330365949, 2.645801412011496],
                  [-72.6956237561994, 2.6553184257478897],
                  [-72.70600926950506, 2.661577322764128]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "88"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.71493566110662, 2.645115498286253],
                  [-72.71253240182928, 2.6368845040216056],
                  [-72.70686757638983, 2.637484682529454],
                  [-72.70463597848943, 2.6417716634450117],
                  [-72.70686757638983, 2.6449440197956537],
                  [-72.70455014780096, 2.6476876727990564],
                  [-72.70326268747381, 2.6527462670917927]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "89"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.71055829599432, 2.640571310279465],
                  [-72.7040351636701, 2.6363700650701403],
                  [-72.69287717416815, 2.638427819599492],
                  [-72.69476544931463, 2.645115498286253],
                  [-72.70832669809393, 2.644172366294645]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "90"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.70877459763805, 2.6248577777676605],
                  [-72.71340945481579, 2.6179127670942726],
                  [-72.71195033311169, 2.6072808243726353],
                  [-72.69366839646618, 2.6289733214435094],
                  [-72.70104983567516, 2.6281159176296973],
                  [-72.71031955003063, 2.627001291791301]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "91"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.73006060838024, 2.6043655985620955],
                  [-72.73538211106579, 2.5885889655486234],
                  [-72.7265415501527, 2.583787342549535],
                  [-72.72233584641735, 2.5916757135863597],
                  [-72.72662738084118, 2.6054802445220293]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "92"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.71787265061657, 2.6054802445220293],
                  [-72.72714236497204, 2.598792353975633],
                  [-72.72405246018688, 2.5927046279266786],
                  [-72.71169284104626, 2.600164231851155]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "93"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.71770098923962, 2.6101960434288096],
                  [-72.72302249192516, 2.605994696170739],
                  [-72.72139170884411, 2.6032509516158204],
                  [-72.71504023789684, 2.607023598837418],
                  [-72.71529772996227, 2.609252885061981]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "94"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.71993258714001, 2.609167143357184],
                  [-72.71838763474743, 2.6085669512598937],
                  [-72.71435359689791, 2.6098959508269948],
                  [-72.71177867173473, 2.6119966165271107],
                  [-72.71203616380016, 2.6132827385884374],
                  [-72.71512606858532, 2.610796234748276],
                  [-72.7184734654359, 2.610624751543395]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "95"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.75915888870814, 2.5814952649143157],
                  [-72.75984553421596, 2.573006621700297],
                  [-72.74928835953334, 2.572835133375575],
                  [-72.74619845474818, 2.5760934075996103],
                  [-72.74971751297572, 2.5814952649143157],
                  [-72.75426653946498, 2.583210135452827]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "96"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.75881556595424, 2.594442480152856],
                  [-72.76284960831264, 2.593842281047201],
                  [-72.76319293106654, 2.5911842530135742],
                  [-72.76018885696986, 2.5881832469140758],
                  [-72.75830058182338, 2.5864683830951347],
                  [-72.75495318497279, 2.590584052362487]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "97"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.6885362731789, 2.582467376469397],
                  [-72.70226918333515, 2.578780399796337],
                  [-72.7020975219582, 2.563346428142753],
                  [-72.68982373350605, 2.562488979805336],
                  [-72.68690549009784, 2.5733785309596144]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "98"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.70321332090839, 2.596014780136394],
                  [-72.69626103514179, 2.5959290375311057],
                  [-72.69514523619159, 2.5919848714021243],
                  [-72.69051037901386, 2.5894983255678787],
                  [-72.6885362731789, 2.5971294334756982]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "99"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.6940294372414, 2.5922421000027986],
                  [-72.69600354307636, 2.5911274423557007],
                  [-72.69471608274921, 2.5855541394084254],
                  [-72.69085370176776, 2.5873547476555334],
                  [-72.6914545165871, 2.5921563571417168]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "100"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.94626910998042, 3.3972875116266747],
                  [-71.96446521593745, 3.387348597603747],
                  [-71.95519550158198, 3.3777523079206793],
                  [-71.93665607287105, 3.3890622107585386]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "101"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.84636218859369, 3.420763505067738],
                  [-71.87777622057611, 3.4113389050251954],
                  [-71.86799152208978, 3.396087992945206],
                  [-71.841555670039, 3.396087992945206],
                  [-71.82816608263666, 3.384778172184168],
                  [-71.80911166979486, 3.3969447921554954],
                  [-71.81202991320306, 3.4032850826620478]]]),
            {
              "from": "11,27",
              "to": "0,0",
              "system:index": "102"
            })]),
    geometry = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Point([-71.95377704552187, 2.894290626950903]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/**** Start of imports. If edited, may not auto-convert in the playground. ****/

/***** End of imports. If edited, may not auto-convert in the playground. *****/


var country       = 'COLOMBIA';

var regionId      = 30201;

var mosaicRegions = [301,302];

var preview       = [
  1987,1997, 2021
  ];

var nsamples      = { wetlands: 1000,  other: 6000 };

var remapAreas    = [form_27_to_11_1,from_27_to_11_2,from_11_to_0];

var version       = 1;

var years         = [
  1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995,
  1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
  2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017,
  2018, 2019, 2020, 2021
];

var featurespace = [
 "gcvi_wet",
  "ndvi_wet",
  "ndwi_mcfeeters_median",
  "gcvi_median",
  "altitude",
  "ndvi_median",
  "ndbi_median",
  "ndwi_gao_median",
  "ndsi2_median",
  "ndmi_median",
  "ndmir_wet",
  "savi_wet",
  "cai_min",
  "cai_wet_min",
  "ndmir_max",
  "ndwi_gao_wet_min",
  "ndwi_gao_wet_qmo",
  "ndsi2_wet",
  "ndwi_gao_wet",
  "cai_median",
  "savi_median",
  "ndmir_median",
  "evi2_wet",
  "evi2_median",
  "ndbi_max",
  "ndsi2_max",
  "ndmi_dry",
  "ndsi2_dry",
  "ndwi_gao_dry",
  "clay_median",
  "ndbi_dry",
  "ndwi_gao_wet_max",
  "greeness",
  "slppost",
  "gv_median",
  "wetness",
  "gcvi_dry",
  "ndbi_min",
  "red_wet",
 
];



/**
 * Asset locations, paths and visualization config
 */
var commonPath   = 'projects/mapbiomas-raisg';

var samplesPath  = 'projects/mapbiomas-raisg/MUESTRAS';

var stablePath   = commonPath + '/DATOS_AUXILIARES/RASTERS/wetlands-stables-11';

var accumulPath  = commonPath + '/DATOS_AUXILIARES/RASTERS/wetlands-accumulated-11';

var mosaicsPath  = country === 'ECUADOR' || country === 'VENEZUELA'
  ? commonPath + '/MOSAICOS/mosaics-2'
  : 'projects/nexgenmap/MapBiomas2/LANDSAT/PANAMAZON/mosaics-2';

var roiPath      = samplesPath + '/' + country + '/COLECCION5/TRANSVERSALES/INUNDABLE/STEP1_ROI/WETLAND-ROI-' + country + '-' + regionId + '-1';

var newRefPath   = commonPath + '/DATOS_AUXILIARES/RASTERS/' + country + '/col_ref_inundable11_noraisg';

var outputPath   = samplesPath + '/' + country + '/COLECCION5/TRANSVERSALES/INUNDABLE/STEP2_PUNTOS';

var slpposPath   = commonPath + '/MOSAICOS/slppost2_30_v1';

var altitudePath = 'JAXA/ALOS/AW3D30_V1_1';

var vMGRegions   = commonPath + '/DATOS_AUXILIARES/VECTORES/clasificacion-regiones-4';

var vRegionsPath = commonPath + '/DATOS_AUXILIARES/VECTORES/'+country+'/ClasificacionRegionesInundables';

var rRegionsPath = commonPath + '/DATOS_AUXILIARES/RASTERS/'+country+'/col_ref_inundable11_noraisg';

var palette1     = require('users/mapbiomas/modules:Palettes.js').get('classification6');

var palette2     = require('users/mapbiomas/modules:Palettes.js').get('classification6');

palette2[11]     = '#5ad8a9';

palette2[27]     = '#cccccc';

// Visualization parameters
var mosaicbands  = [ 'swir1_median', 'nir_median', 'red_median'];
var mosaicbands2  = [ 'nir_median', 'swir1_median', 'red_median'];
var mosaicbands3  = [ 'nir_median', 'red_median', 'green_median'];

var mosaicVis    = { bands: mosaicbands, gain:[0.08, 0.06, 0.2]};
var mosaicVis2    = { bands: mosaicbands2, gain:[0.06, 0.08, 0.2]};
var mosaicVis3    = { bands: mosaicbands3, min: 100, max: 4500, gamma: 2.2};

var referenceVis = { min: 0, max: 49, palette: palette2, opacity: 0.75};

var pointsVis    = { styleProperty: "style", width: 0.5 };






/**
 * Assets loading
 */
var mosaicreg     = parseInt(regionId.toString().slice(0, 3), 10);
 
var mosaics       = ee.ImageCollection(mosaicsPath);
 
var stables       = ee.Image(stablePath);

var accumulated   = ee.Image(accumulPath);

var vRegions      = ee.FeatureCollection(vRegionsPath);

var mgRegions     = ee.FeatureCollection(vMGRegions);

var rRegions      = ee.Image(rRegionsPath).rename('regionid');

var roi           = ee.Image(roiPath);

var newReference  = ee.Image(newRefPath);

var region        = getRegion(vRegions, rRegions, regionId);

var reference     = getReference(roi, region.vector, stables, accumulated);

reference         = remapWithPolygons(reference, remapAreas);

reference         = reference.where(newReference.gte(1).and(reference.eq(27)), 11)




/**
 * Implementation
 */
 /***************************************************
  Datos adicionales de apoyo
*****************************************************/

// ************* DEM ***************

var ALOSDSMDEM = ee.Image  ('JAXA/ALOS/AW3D30_V1_1');
var ALOSDSM = ALOSDSMDEM.select('AVE').clip (MaskZone);
Map.addLayer(ALOSDSM,
    {
    min: 10, 
    max: 400,
    palette: 
    [ '0602ff', '235cb1', '307ef3', '269db1', '30c8e2', '32d3ef', '3ae237',
      'b5e22e', 'd6e21f', 'fff705', 'ffd611', 'ffb613', 'ff8b13', 'ff6e08',
      'ff500d', 'ff0000', 'de0101', 'c21301'  ],
    }, 'DEM General',false);
    
//********************** NICFI DATA **************************


var basemap1= nicfi.filter(ee.Filter.date('2021-01')).first().clip(MaskZone);
var vis = {"bands":["R","G","B"],
    min:94,
    max:1150,
    gamma:1.29
};

Map.addLayer(basemap1, vis, '2021-01', false);


//*******************************************

ee.List(years)
  .evaluate(function(years) {
    
    years.forEach(function(year) {
      
      var yearMosaic  = getMosaic(mosaics, mgRegions, mosaicRegions, year, []);
      var selected = yearMosaic.select(featurespace);
      var yearSamples = getSamples(reference, selected, region, nsamples);
      
      // visualization
      if(preview.indexOf(year) !== -1) {
        //print('VALUE FOR THE FIRST SAMPLE POINT: ', yearSamples.first());
        
        var styledSamples = yearSamples.map(stylePoints);
        Map.addLayer(yearMosaic.clip(region.vector), mosaicVis, 'Mosaic - Green ' + year, false);
        Map.addLayer(yearMosaic.clip(region.vector), mosaicVis2, 'Mosaic - Orange ' + year, false);
        Map.addLayer(yearMosaic.clip(region.vector), mosaicVis3, 'Mosaic - Red' + year, false);

        if(year === preview[preview.length - 1]) {
          Map.addLayer(region.vector,{}, 'Region',false);
          Map.addLayer(roi,{}, 'RoiMask_Step1',false);
          Map.addLayer(reference, referenceVis, 'Reference (Stable pixels within RoiMask)');
          Map.addLayer(styledSamples.style(pointsVis), {}, 'Training samples',false);
        }
      }
   
      
      // export
      var filename = 'samples-WETLAND-' + country + '-' + regionId + '-' + year + '-' + version;
      var assetid  = outputPath + '/' + filename;
      Export.table.toAsset(yearSamples, filename, assetid);
      
    });
    
  });







/**
 * 
 * getSamples
 * @reference
 * @mosaic
 * @region
 * @nsamples
 */
function getSamples(reference, mosaic, region, nsamples) {
  
  var samples = reference
    .addBands(ee.Image.pixelLonLat())
    .addBands(mosaic)
    .addBands(region.raster)
    .stratifiedSample({
      numPoints: 0,
      classBand: 'reference',
      region: region.vector,
      scale: 30,
      seed: 1,
      geometries: true,
      dropNulls: true,
      tileScale: 8,
      classValues: [ 11, 27 ], 
      classPoints: [ nsamples.wetlands, nsamples.other ]
  });
  
  samples = samples
    .select(ee.List(featurespace).cat(['reference', 'regionid']));
  
  return samples;

}







/**
 * 
 * getReference
 * @roi
 * @region
 * @stables
 * @accumulated
 */
function getReference(roi, region, stables, accumulated) {
  
  stables     = stables.clip(region);
  accumulated = accumulated.clip(region);
  roi         = roi.clip(region);
  
  var reference = roi
    .where(stables.eq(1).and(accumulated.eq(1)), 11)
    .where(stables.eq(0).and(accumulated.eq(1)), 0);
  
  reference = reference.remap([0, 1, 11], [0, 27, 11], 0);
  
  return reference
    .updateMask(reference.neq(0))
    .rename('reference');
  
}







/**
 * 
 * getMosaic
 * @mosaics
 * @regionId
 * @year
 * @variables
 */
function getMosaic(mosaics, regions, regionIds, year, variables) {
  
  // Additional variables
  var slppost = ee.Image(slpposPath);
  var altitude = ee.Image(altitudePath).select('AVE').rename('altitude');
  var slope = ee.Terrain.slope(altitude).int8().rename('slope');
  
  var getMndwi = function(image) {
    var mndwi = image.expression(
      '(GREEN - SWIR1) / (GREEN + SWIR1)',  
      {
        GREEN: image.select('green_median'),
        SWIR1: image.select('swir1_median')
      }
    )
    .multiply(100).add(100).byte()
    .rename('mndwi_median');
  
    return image.addBands(mndwi);
  };

  var getMmri = function(image) { 
    var mmri = image.expression(
      '(MNDWI - NDVI) / (MNDWI + NDVI)',  
      {
        MNDWI: image.select('mndwi_median'),
        NDVI: image.select('ndvi_median')
      }
    )
    .multiply(100).add(100).byte()
    .rename('mmri_median');
    
    return image.addBands(mmri);
  };
  
  var getClay = function(image) {
    var clay = image.expression(
      '(SWIR1 / SWIR2)',  
      {
        SWIR1: image.select('swir1_median'),
        SWIR2: image.select('swir2_median') 
      }
    )
    .multiply(100).add(100).int16()
    .rename('clay_median');
    
    return image.addBands(clay);    
  };
  
  var getBai = function(image) {
    var bai = image.expression(
      '1 / ( ((0.1 - RED) ** 2) + ((0.06 - NIR) ** 2) )',  
      {
        NIR: image.select('nir_median'),
        RED: image.select('red_median') 
      }
    )
    .multiply(100).add(100).int16()
    .rename('bai_median');
    
    return image.addBands(bai);    
  };
  
  var tasseledCap = function(image){
    var sensor = ee.String(image.get('satellite')).slice(1);
    
    var landsatBands = {
      BLUE: image.select('blue_median'),
      GREEN: image.select('green_median'),
      RED: image.select('red_median'),
      NIR: image.select('nir_median'),
      SWIR1: image.select('swir1_median'),
      SWIR2: image.select('swir2_median'),
    };

    
    var brightness = ee.Image(
      ee.Algorithms.If(
        ee.Algorithms.IsEqual(sensor, '8'),
        // Landsat 8
        image.expression(
          '(BLUE * 0.3029) + (GREEN * 0.2786) + (RED * 0.4733) +\
           (NIR * 0.5599) + (SWIR1 * 0.508) + (SWIR2 * 0.1872)',
          landsatBands
        ),
        // Landsat 5, 7, X
        image.expression(
          '(BLUE * 0.3037) + (GREEN * 0.2793) + (RED * 0.4743) +\
           (NIR * 0.5585) + (SWIR1 * 0.5082) + (SWIR2 * 0.1863)',
          landsatBands
        )
      )
    ).rename('brightness').toInt16();
    
    var greeness = ee.Image(
      ee.Algorithms.If(
        ee.Algorithms.IsEqual(sensor, '8'),
        // Landsat 8
        image.expression(
          '-(BLUE * 0.2941) - (GREEN * 0.243) - (RED * 0.5424) +\
           (NIR * 0.7276) + (SWIR1 * 0.0713) - (SWIR2 * 0.1608)',
          landsatBands
        ),
        // Landsat 5, 7, X
        image.expression(
          '-(BLUE * 0.2848) - (GREEN * 0.2435) - (RED * 0.5436) +\
           (NIR * 0.7243) + (SWIR1 * 0.0840) - (SWIR2 * 0.1800)',
          landsatBands
        )
      )
    ).rename('greeness').toInt16();
    
    var wetness = ee.Image(
      ee.Algorithms.If(
        ee.Algorithms.IsEqual(sensor, '8'),
        // Landsat 8
        image.expression(
          '(BLUE * 0.1511) + (GREEN * 0.1973) + (RED * 0.3283) +\
           (NIR * 0.3407) - (SWIR1 * 0.7117) - (SWIR2 * 0.4559)',
          landsatBands
        ),
        // Landsat 5, 7, X
        image.expression(
          '-(BLUE * 0.1509) + (GREEN * 0.1973) + (RED * 0.3279) +\
           (NIR * 0.3406) - (SWIR1 * 0.7112) - (SWIR2 * 0.4572)',
          landsatBands
        )
      )
    ).rename('wetness').toInt16();
    
    
    return image
      .addBands(brightness)
      .addBands(greeness)
      .addBands(wetness);

  };
  

  
  // Aditional Bands
  var joinedMosaics = mosaics
    .filter(
      ee.Filter.and(
        ee.Filter.eq('year', year)
      )
    )
    .map(getMndwi)
    .map(getMmri)
    .map(getClay)
    .map(tasseledCap);
    
    
    
  // mosaics by regions
  var mosaicByRegion = regionIds.map(function(id) {
    var filtered = joinedMosaics
      .filter(ee.Filter.eq('region_code', id));
    
    var region = regions
      .filter(ee.Filter.eq('id_region', id))
      .reduceToImage(['id_region'], ee.Reducer.first());
    
    var clippedMosaic = filtered
      .mosaic()
      .addBands([slppost, altitude, slope])
      .updateMask(region);
    
    clippedMosaic = variables.length > 0
      ? clippedMosaic.select(variables)
      : clippedMosaic;
    
    return clippedMosaic;
  });
  

  return ee.ImageCollection(mosaicByRegion).mosaic();
}







/**
 * 
 * getRegion
 * @regions
 * @regionIds
 */
function getRegion(vector, raster, regionId) {
  
  var region = vector
    .filter( ee.Filter.eq('id_regionC', regionId) );
    
  var image = raster.clip(region).rename('regionid');
  
  return {
    vector: region,
    raster: image
  };
  
}







/**
 * 
 * remapWithPolygons
 * @image
 * @polygons
 */
function remapWithPolygons(image, polygons) {
  
  if(polygons.length > 0) {
    polygons.forEach(function( polygon ) {
      
      var excluded = polygon.map(function(layer){
        var area = image.clip( layer );

        var from = ee.String(layer.get('from'))
          .split(',')
          .map(function(item) { return ee.Number.parse(item) });
          
        var to = ee.String(layer.get('to'))
          .split(',')
          .map(function(item){ return ee.Number.parse(item) });
        
        return area.remap(from, to);
      });
        
      excluded = ee.ImageCollection(excluded).mosaic();
      image = excluded.unmask(image).rename('reference');
      image = image.mask(image.neq(0));
    });
  }
  else image = image;

  return image;
  
}







/**
 * 
 * addStyledPointsToMap
 * 
 */
function stylePoints(point) {

  var value = point.get('reference');
  var classId = ee.Number(value).byte();
  var color = ee.List(palette1).get(classId);
  
  return point.set({ style: { color: color } });
  
}